/* ================= GLOBAL STYLE ================= */
body {
    font-family: "Playfair Display", serif;
    background: linear-gradient(135deg,#ffd1dc,#ffe6f0);
    text-align: center;
    padding-top: 50px;
    overflow: hidden;
}

/* PAGE CONTROL */
.page { display:none; }
.page.active { display:block; }

h1 {
    color:#8b004f;
    font-size:2.3rem;
}
.subtitle {
    color:#c2185b;
}

/* ================= BUTTONS ================= */
.btn-group button {
    padding:14px 45px;
    border-radius:40px;
    border:none;
    font-size:1.1rem;
    font-weight:bold;
    cursor:pointer;
    margin:10px;
    transition:0.3s;
    box-shadow:0 5px 15px rgba(0,0,0,0.2);
}

#yes1,#yes2 {
    background: linear-gradient(135deg,#ff4f81,#ff85a1);
    color:white;
}
#yes1:hover,#yes2:hover {
    transform: scale(1.05);
}

#no1,#no2 {
    background:#777;
    color:white;
}

/* PETALS CONTAINER */
#hearts span {
    position: fixed;
    top: -10vh;
    font-size: 22px;
    pointer-events: none;
    animation: fallPetal linear forwards;
}

/* Petal Falling Animation */
@keyframes fallPetal {
    0% {
        transform: translateY(-10vh) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0;
    }
}
/* ================= ENVELOPE ================= */
.envelope {
    position: relative;
    width: 240px;
    height: 150px;
    margin: 30px auto;
    perspective: 1000px;
    cursor:pointer;
    transition:0.3s;
}
.envelope:hover {
    transform: scale(1.03);
}

.env-back {
    position: absolute;
    width: 100%;
    height: 100%;
    background: #fff5f7;
    border: 2px solid #ff5f9e;
    border-radius: 6px;
}

.env-front {
    position: absolute;
    width: 100%;
    height: 100%;
    background: #ffe0ea;
    border-radius: 6px;
    z-index: 2;
}

.env-letter {
    position: absolute;
    width: 90%;
    height: 90%;
    background: white;
    top: 5%;
    left: 5%;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 50px;
    z-index: 1;
    transition: 1s;
}

.env-flap {
    position: absolute;
    width: 100%;
    height: 100%;
    background: #ffb6c9;
    clip-path: polygon(0 0, 100% 0, 50% 60%);
    transform-origin: top;
    transition: 1s;
    z-index: 3;
}

.envelope.open .env-flap {
    transform: rotateX(180deg);
}
.envelope.open .env-letter {
    transform: translateY(-120%);
}

/* ================= MODAL DESIGN ================= */
.modal {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.45);
    z-index:9999;
}

.modal-content {
    background: linear-gradient(135deg,#fff0f5,#ffe4ec);
    width:320px;
    padding:25px;
    margin:15% auto;
    border-radius:20px;
    text-align:center;
    box-shadow:0 10px 40px rgba(255,0,120,0.4);
    animation: popUp 0.5s ease;
}

.modal-content img {
    border-radius:12px;
    box-shadow:0 5px 15px rgba(255,0,100,0.4);
    margin-bottom:10px;
}

.modal-content button {
    padding:10px 30px;
    border:none;
    border-radius:30px;
    background:#ff4f81;
    color:white;
    font-weight:bold;
    font-size:1rem;
    cursor:pointer;
    transition:0.3s;
}
.modal-content button:hover {
    background:#ff2f6f;
    transform:scale(1.05);
}

@keyframes popUp {
    from { transform: scale(0.7); opacity:0; }
    to { transform: scale(1); opacity:1; }
}

/* ================= 3D CARNATION FLOWER ================= */
.carnation3d {
    position:relative;
    height:450px;
    margin-top:40px;
}

.stem {
    width:6px;
    height:0;
    background:linear-gradient(#1b5e20,#66bb6a);
    margin:auto;
    animation: growStem 4s forwards;
}

.leaf {
    width:50px;
    height:20px;
    background:#4caf50;
    border-radius:50%;
    position:absolute;
    top:34%;
    left:50%;
    margin-left:-25px;
    transform-origin: center;
}
.leaf.left { transform: translateX(-32px) rotate(-28deg); }
.leaf.right { transform: translateX(32px) rotate(28deg); }

.flower3d {
    position:absolute;
    top:-60px;
    left:50%;
    transform: translateX(-50%) scale(0);
    width:160px;
    height:160px;
    animation: bloom 3s forwards 4s;
}

.petal3d {
    position:absolute;
    width:65px;
    height:95px;
    background:radial-gradient(circle,#ffd1dc,#ff2f6f);
    border-radius:50% 50% 40% 40%;
    top:30px;
    left:45px;
    transform-origin: bottom center;
    filter: drop-shadow(0 0 15px rgba(255,0,120,0.7));
}

.petal3d:nth-child(1){transform:rotate(0deg);}
.petal3d:nth-child(2){transform:rotate(60deg);}
.petal3d:nth-child(3){transform:rotate(120deg);}
.petal3d:nth-child(4){transform:rotate(180deg);}
.petal3d:nth-child(5){transform:rotate(240deg);}
.petal3d:nth-child(6){transform:rotate(300deg);}

/* 3D shine */
.petal3d::after {
    content:"";
    position:absolute;
    inset:0;
    background:rgba(255,255,255,0.15);
    border-radius:inherit;
}

@keyframes growStem { to { height:280px; } }
@keyframes bloom { to { transform: translateX(-50%) scale(1); } }

/* ================= CINEMATIC LOVE LETTER ================= */
.love-letter {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 99999;
    overflow: auto; /* IMPORTANT */
}

.cinematic-overlay {
    position:fixed;
    inset:0;
    background: radial-gradient(circle, rgba(255,105,180,0.2), rgba(0,0,0,0.9));
    backdrop-filter: blur(6px);
    animation: fadeInOverlay 3s forwards;
}

.letter-paper {
    width:420px;
    max-height:70vh;
    overflow-y:auto;
    background:#fffaf0;
    padding:30px;
    border-radius:10px;
    box-shadow:0 0 30px rgba(255,0,100,0.6);
    margin:6% auto;
    font-size:1.15rem;
    position:relative;
}

.cinematic-letter {
    opacity:0;
    transform: scale(0.8) translateY(40px);
    animation: cinematicAppear 3s forwards ease-out 2s, floatLetter 6s infinite ease-in-out;
}

#typedLetter {
    white-space: pre-line;
    line-height:1.8;
}

/* Close button always clickable */
.letter-paper button {
    position:sticky;
    bottom:0;
    margin-top:15px;
    padding:10px 25px;
    border:none;
    border-radius:25px;
    background:#ff4f81;
    color:white;
    font-weight:bold;
    cursor:pointer;
}

/* Scrollbar style */
.letter-paper::-webkit-scrollbar {
    width:6px;
}
.letter-paper::-webkit-scrollbar-thumb {
    background:#ff85a1;
    border-radius:10px;
}

.signature {
    font-family:"Great Vibes", cursive;
    font-size:2rem;
    color:#c2185b;
    text-align:right;
}

/* ================= CINEMATIC ANIMATIONS ================= */
@keyframes cinematicAppear {
    to { opacity:1; transform: scale(1) translateY(0); }
}
@keyframes fadeInOverlay {
    from { opacity:0; } to { opacity:1; }
}
@keyframes floatLetter {
    0%,100% { transform: translateY(0) rotate(-1deg); }
    50% { transform: translateY(-10px) rotate(1deg); }
}

/* ================= MOBILE RESPONSIVE ================= */

@media (max-width: 768px) {

    body {
        padding-top: 20px;
        font-size: 16px;
    }

    h1 {
        font-size: 1.6rem;
        padding: 0 10px;
    }

    .subtitle {
        font-size: 1rem;
        padding: 0 10px;
    }

    .btn-group {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .btn-group button {
        width: 85%;
        max-width: 320px;
        font-size: 1rem;
        padding: 12px;
    }

    /* Envelope smaller */
    .envelope {
        width: 180px;
        height: 115px;
    }

    /* Love Letter Popup */
    .letter-paper {
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        font-size: 1rem;
    }

    .letter-paper button {
        width: 100%;
        padding: 12px;
        font-size: 1rem;
    }

    /* Flower smaller */
    .carnation3d {
        height:360px;
        margin-top: 10px;
    }

    /* adjust leaf size & position on medium screens */
    .leaf { width:40px; height:16px; top:35%; margin-left:-20px; }
    .leaf.left { transform: translateX(-26px) rotate(-28deg); }
    .leaf.right { transform: translateX(26px) rotate(28deg); }
}

/* Small Phones (iPhone SE, Android small) */
@media (max-width: 480px) {

    h1 {
        font-size: 1.4rem;
    }

    .subtitle {
        font-size: 0.95rem;
    }

    .btn-group button {
        font-size: 0.95rem;
    }

    .carnation3d {
        height:315px;
    }

    /* small phones: reduce leaf size and tweak placement */
    .leaf { width:32px; height:13px; top:36%; margin-left:-16px; }
    .leaf.left { transform: translateX(-20px) rotate(-28deg); }
    .leaf.right { transform: translateX(20px) rotate(28deg); }
}
